<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–†–ê–ó–£–ú ‚Äî –¥–µ–º–æ</title>

<style>
:root{
  --bg:#020617;
  --card:#020617ee;
  --primary:#6366f1;
  --accent:#22c55e;
  --text:#f8fafc;
  --muted:#94a3b8;
  --back:#334155;
  --gold:#facc15;
}

body{
  margin:0;
  padding:16px;
  font-family:-apple-system,BlinkMacSystemFont,Arial;
  background:var(--bg);
  color:var(--text);
}

h1{margin-top:0}

button{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:18px;
  background:linear-gradient(135deg,var(--primary),#818cf8);
  color:#fff;
  font-size:16px;
}

.back{
  background:linear-gradient(135deg,var(--back),#475569);
}

.card{
  background:var(--card);
  border-radius:20px;
  padding:16px;
  margin-bottom:14px;
}

.task{
  display:flex;
  gap:8px;
  align-items:center;
  margin:6px 0;
}

.task.done{
  opacity:.5;
  text-decoration:line-through;
}

.hidden{display:none}

.badge{
  background:var(--gold);
  color:#000;
  padding:6px 10px;
  border-radius:14px;
  font-size:12px;
  display:inline-block;
  margin-top:8px;
}

select,textarea{
  width:100%;
  padding:8px;
  border-radius:12px;
  background:#020617;
  color:#fff;
  border:1px solid rgba(255,255,255,.15);
}
</style>
</head>

<body>

<h1>–†–ê–ó–£–ú</h1>

<!-- üîí –ü–û–õ–ù–´–ô –ë–õ–û–ö –û –¶–ï–ù–¢–†–ï (–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù –ò –ó–ê–§–ò–ö–°–ò–†–û–í–ê–ù) -->
<div class="card">
  <b style="font-size:18px">–õ–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´–†–∞–∑—É–º¬ª</b><br><br>

  –ú—ã ‚Äî –ª–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –≤ –ü–µ—Ç–µ—Ä–≥–æ—Ñ–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º
  –æ—Ç 3 –¥–æ 7 –ª–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ä–µ—á—å, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏.<br><br>

  –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∞–º –∏ –¥–µ–ª–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å
  –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π:
  –≤—ã –≤–∏–¥–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.<br><br>

  –≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —á–∞—Å—Ç—å –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã:
  –¥–µ—Ç–∏ –≤–æ–≤–ª–µ–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ–Ω—è—Ç–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è,
  —Ä–æ–¥–∏—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç,
  –ª–æ–≥–æ–ø–µ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —É–¥–æ–±–Ω–æ–º —Ü–∏—Ñ—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.<br><br>

  –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–≤—É–∫,
  –∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤—ã–π –Ω–∞–≤—ã–∫ —Ä–µ—á–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —É —Ä–µ–±—ë–Ω–∫–∞,
  —Å–æ—Ö—Ä–∞–Ω—è—è —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π.<br><br>

  üìû <b>8 913 450-30-29</b><br>
  üìç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 60–õ, 2 —ç—Ç–∞–∂
</div>

<!-- –ì–õ–ê–í–ù–´–ï –†–û–õ–ò -->
<div id="home">
  <button onclick="showParent()">–†–æ–¥–∏—Ç–µ–ª—å</button>
  <button onclick="showSpeech()">–õ–æ–≥–æ–ø–µ–¥</button>
  <button onclick="showAdmin()">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
</div>

<div id="screen" class="hidden"></div>

<script>
/* ================== –î–ê–ù–ù–´–ï ================== */

const PRICE = 16000;

const data = {
  "–í–∞—Å—é–∫–æ–≤–∞ –ê.–ê.": ["–§—ë–¥–æ—Ä","–ê—Ä—Ç—ë–º","–ú–∏—Ä–æ—Å–ª–∞–≤–∞","–ê–ª–µ–∫—Å–∞–Ω–¥—Ä","–Ø—Å—è"],
  "–ü—Ä–æ–∫–æ–ø–µ–Ω–∫–æ –°.–ì.": ["–î–∞–≤–∏–¥","–ú–∞–∫—Å–∏–º","–ò–ª—å—è"],
  "–°–∞—Ñ—Ä–æ–Ω–æ–≤–∞ –ù.–ù.": ["–ú–∞–π—è"]
};

const store = JSON.parse(localStorage.getItem("razum")) || {};

function save(){
  localStorage.setItem("razum", JSON.stringify(store));
}

const home = document.getElementById("home");
const screenEl = document.getElementById("screen");

function screen(){
  home.classList.add("hidden");
  screenEl.classList.remove("hidden");
  return screenEl;
}

function back(){
  screenEl.classList.add("hidden");
  home.classList.remove("hidden");
}

/* ============== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –†–ï–ë–Å–ù–ö–ê ============== */

function initChild(name, log){
  if(store[name]) return;
  store[name] = {
    name,
    log,
    lessonsLeft: 8,
    reward: 0,
    tasks: [
      { text: "–ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ —Å–ª–æ–≤–∞ —Å–æ –∑–≤—É–∫–æ–º –†", status: "active" },
      { text: "–ê—Ä—Ç–∏–∫—É–ª—è—Ü–∏–æ–Ω–Ω–∞—è –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞", status: "active" }
    ]
  };
  save();
}

/* ============== –î–û–ü. –ë–õ–û–ö –î–õ–Ø –†–ï–ë–Å–ù–ö–ê ============== */

function childExtraInfo(c){
  return `
  <div class="card">
    üìÖ –°–µ–≥–æ–¥–Ω—è –∑–∞–Ω—è—Ç–∏–µ –≤ <b>16:30</b><br>
    üéü –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π: <b>${c.lessonsLeft}</b><br>
    üèÜ –ù–∞–≥—Ä–∞–¥—ã: <b>${c.reward}</b>
  </div>`;
}

/* ================== –†–û–î–ò–¢–ï–õ–¨ ================== */

function showParent(){
  const s = screen();
  s.innerHTML = "<h2>–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–≥–æ–ø–µ–¥–∞</h2>";
  Object.keys(data).forEach(l=>{
    s.innerHTML += `<button onclick="parentKids('${l}')">${l}</button>`;
  });
  s.innerHTML += `<button class="back" onclick="back()">–ù–∞–∑–∞–¥</button>`;
}

function parentKids(log){
  const s = screen();
  s.innerHTML = `<h2>${log}</h2>`;
  data[log].forEach(k=>{
    s.innerHTML += `<button onclick="parentChild('${k}','${log}')">${k}</button>`;
  });
  s.innerHTML += `<button class="back" onclick="showParent()">–ù–∞–∑–∞–¥</button>`;
}

function parentChild(name, log){
  initChild(name, log);
  const c = store[name];
  const s = screen();

  s.innerHTML = `
  <h2>${name}</h2>
  ${childExtraInfo(c)}
  <div class="card">
    ${c.tasks.map((t,i)=>`
      <div class="task ${t.status==='done'?'done':''}">
        ${t.status==='active'
          ? `<input type="checkbox" onchange="toggle('${name}',${i})">`
          : ''}
        ${t.text} (${t.status})
      </div>`).join("")}
    <button onclick="send('${name}')">–Ø –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞–Ω–∏—è</button>
    ${c.reward>0?`<div class="badge">üéâ –ü–æ–ª—É—á–µ–Ω–∞ –Ω–∞–≥—Ä–∞–¥–∞</div>`:""}
  </div>
  <button class="back" onclick="parentKids('${log}')">–ù–∞–∑–∞–¥</button>`;
}

function toggle(name,i){
  const t = store[name].tasks[i];
  if(t.status==="active") t.checked = !t.checked;
  save();
}

function send(name){
  const c = store[name];
  if(!c.tasks.every(t=>t.checked)){
    alert("–û—Ç–º–µ—Ç—å—Ç–µ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è");
    return;
  }
  c.tasks.forEach(t=>{
    t.status="review";
    delete t.checked;
  });
  save();
  parentChild(name, c.log);
}

/* ================== –õ–û–ì–û–ü–ï–î ================== */

function showSpeech(){
  const s = screen();
  s.innerHTML = "<h2>–õ–æ–≥–æ–ø–µ–¥—ã</h2>";
  Object.keys(data).forEach(l=>{
    s.innerHTML += `<button onclick="speechKids('${l}')">${l}</button>`;
  });
  s.innerHTML += `<button class="back" onclick="back()">–ù–∞–∑–∞–¥</button>`;
}

function speechKids(log){
  const s = screen();
  s.innerHTML = `
    <h2>${log}</h2>
    <div class="card">
      <b>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</b><br>
      16:00 ‚Ä¢ ${data[log][0]||""}<br>
      16:40 ‚Ä¢ ${data[log][1]||""}
    </div>`;
  data[log].forEach(k=>{
    s.innerHTML += `<button onclick="speechChild('${k}','${log}')">${k}</button>`;
  });
  s.innerHTML += `<button class="back" onclick="showSpeech()">–ù–∞–∑–∞–¥</button>`;
}

function speechChild(name, log){
  initChild(name, log);
  const c = store[name];
  const ready = c.tasks.every(t=>t.status==="review");
  const s = screen();

  s.innerHTML = `
  <h2>${name}</h2>
  <div class="card">
    ${c.tasks.map(t=>`
      <div class="task">${t.text} (${t.status})</div>`).join("")}
    ${ready ? `
      <button onclick="approve('${name}')">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
      <select id="newTasks" multiple>
        <option>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–≤—É–∫–∞</option>
        <option>–°–ª–æ–≥–æ–≤—ã–µ —Ü–µ–ø–æ—á–∫–∏</option>
        <option>–ò–≥—Ä–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</option>
      </select>
      <button onclick="assign('${name}')">–ù–∞–∑–Ω–∞—á–∏—Ç—å –Ω–æ–≤—ã–µ</button>
    ` : ""}
  </div>
  <button class="back" onclick="speechKids('${log}')">–ù–∞–∑–∞–¥</button>`;
}

function approve(name){
  const c = store[name];
  c.tasks.forEach(t=>t.status="done");
  c.lessonsLeft--;
  c.reward++;
  save();
  speechChild(name, c.log);
}

function assign(name){
  const sel = [...document.getElementById("newTasks").selectedOptions].map(o=>o.value);
  if(!sel.length) return;
  store[name].tasks = sel.map(t=>({text:t,status:"active"}));
  save();
  speechChild(name, store[name].log);
}

/* ================== –ê–î–ú–ò–ù ================== */

function showAdmin(){
  const kids = Object.values(data).flat().length;
  const income = kids * PRICE;
  const expenses = kids * 3000;
  const s = screen();

  s.innerHTML = `
  <h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h2>
  <div class="card">
    üë∂ –î–µ—Ç–µ–π: ${kids}<br>
    üí∞ –î–æ—Ö–æ–¥: ${income.toLocaleString()} ‚ÇΩ<br>
    üìâ –†–∞—Å—Ö–æ–¥—ã: ${expenses.toLocaleString()} ‚ÇΩ<br>
    üìà –ü—Ä–∏–±—ã–ª—å: ${(income-expenses).toLocaleString()} ‚ÇΩ
  </div>
  <button class="back" onclick="back()">–ù–∞–∑–∞–¥</button>`;
}
</script>
</body>
</html>
