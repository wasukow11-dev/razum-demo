<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–†–ê–ó–£–ú ‚Äî –ª–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#eef2ff,#ffffff);
  margin: 0;
  padding: 16px;
}
header { text-align:center; margin-bottom:16px; }
.logo { max-width:140px; margin:0 auto 8px; display:block; }
.role-btn {
  width:100%; padding:12px; margin:6px 0;
  border:none; border-radius:14px;
  font-size:16px; background:#6366f1; color:#fff;
}
.card {
  background:#fff; border-radius:16px;
  padding:16px; margin-bottom:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}
.progress { background:#e5e7eb; border-radius:10px; overflow:hidden; }
.progress div { background:#22c55e; height:10px; }
.hidden { display:none; }
textarea, input {
  width:100%; padding:8px; margin-top:6px;
  border-radius:8px; border:1px solid #ccc;
}
</style>
</head>

<body>

<header>
  <img src="logo.png.jpg" class="logo">
  <h1>–†–ê–ó–£–ú</h1>
  <p>–õ–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ‚Ä¢ –ü–µ—Ç–µ—Ä–≥–æ—Ñ</p>
  <p>üìû 8 913 450-30-29<br>üìç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 60–õ, 2 —ç—Ç–∞–∂</p>
</header>

<div id="roles">
  <button class="role-btn" onclick="showParent()">–Ø —Ä–æ–¥–∏—Ç–µ–ª—å</button>
  <button class="role-btn" onclick="showSpeech()">–Ø –ª–æ–≥–æ–ø–µ–¥</button>
  <button class="role-btn" onclick="showAdmin()">–Ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
</div>

<div id="parent" class="hidden"></div>
<div id="speech" class="hidden"></div>
<div id="admin" class="hidden"></div>

<script>
const data = JSON.parse(localStorage.getItem("razumData")) || {
  child: {
    name: "–§—ë–¥–æ—Ä",
    age: 4,
    tasks: [
      { id:1, text:"–ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ 10 —Å–ª–æ–≤ —Å–æ –∑–≤—É–∫–æ–º –†", done:false },
      { id:2, text:"–°–ª–æ–≥–∏ –†–ê-–†–û-–†–£", done:false }
    ],
    comment: ""
  }
};

function save() {
  localStorage.setItem("razumData", JSON.stringify(data));
}

function hideAll() {
  ["roles","parent","speech","admin"].forEach(id=>{
    document.getElementById(id).classList.add("hidden");
  });
}

function back() {
  hideAll();
  document.getElementById("roles").classList.remove("hidden");
}

/* –†–û–î–ò–¢–ï–õ–¨ */
function showParent() {
  hideAll();
  const p = document.getElementById("parent");
  p.innerHTML = `
    <h2>${data.child.name} (${data.child.age} –≥–æ–¥–∞)</h2>
    <p><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ª–æ–≥–æ–ø–µ–¥–∞:</b><br>${data.child.comment || "‚Äî"}</p>
    <div class="progress"><div style="width:${progress()}%"></div></div>
    <h3>–ó–∞–¥–∞–Ω–∏—è</h3>
  `;
  data.child.tasks.forEach(t=>{
    p.innerHTML += `
      <div class="card">
        <label>
          <input type="checkbox" ${t.done?"checked":""}
            onchange="toggle(${t.id})">
          ${t.text}
        </label>
      </div>`;
  });
  p.innerHTML += `<button class="role-btn" onclick="back()">–ù–∞–∑–∞–¥</button>`;
  p.classList.remove("hidden");
}

function toggle(id){
  const t = data.child.tasks.find(x=>x.id===id);
  t.done=!t.done; save(); showParent();
}
function progress(){
  return data.child.tasks.filter(t=>t.done).length / data.child.tasks.length * 100;
}

/* –õ–û–ì–û–ü–ï–î */
function showSpeech() {
  hideAll();
  const s = document.getElementById("speech");
  s.innerHTML = `
    <h2>–õ–æ–≥–æ–ø–µ–¥</h2>
    <div class="card">
      <b>${data.child.name}</b><br>
      <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–æ–¥–∏—Ç–µ–ª—é"
        onchange="data.child.comment=this.value;save()">${data.child.comment}</textarea>
      <h4>–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h4>
      <input id="taskText" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ">
      <button class="role-btn" onclick="addTask()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
    <button class="role-btn" onclick="back()">–ù–∞–∑–∞–¥</button>
  `;
  s.classList.remove("hidden");
}

function addTask(){
  const text=document.getElementById("taskText").value;
  if(!text) return;
  data.child.tasks.push({id:Date.now(),text,done:false});
  save(); showSpeech();
}

/* –ê–î–ú–ò–ù */
function showAdmin(){
  hideAll();
  const a=document.getElementById("admin");
  a.innerHTML=`
    <h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h2>
    <div class="card">üë∂ –î–µ—Ç–µ–π: 1</div>
    <div class="card">üë©‚Äç‚öïÔ∏è –õ–æ–≥–æ–ø–µ–¥–æ–≤: 3</div>
    <div class="card">–¶–µ–Ω—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ ‚úÖ</div>
    <button class="role-btn" onclick="back()">–ù–∞–∑–∞–¥</button>
  `;
  a.classList.remove("hidden");
}
</script>

</body>
</html>
