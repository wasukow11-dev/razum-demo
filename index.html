<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–†–ê–ó–£–ú ‚Äî –ª–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#fff8e6,#e0f7fa);
  margin: 0; padding: 16px;
}
header { text-align:center; margin-bottom:16px; }
.logo { max-width:140px; margin:0 auto 8px; display:block; }
.role-btn {
  width:100%; padding:12px; margin:6px 0; border:none;
  border-radius:14px; font-size:16px; color:#fff; cursor:pointer; transition:.2s;
}
.role-btn:hover { opacity:0.9; }
.card {
  background:#fff; border-radius:16px; padding:16px;
  margin-bottom:12px; box-shadow:0 6px 16px rgba(0,0,0,0.12);
}
.card:hover { transform: translateY(-2px); transition:.2s; }
.progress { background:#e5e7eb; border-radius:10px; overflow:hidden; height:12px; margin-bottom:8px; }
.progress div { background:#22c55e; height:12px; }
.hidden { display:none; }
textarea,input,select { width:100%; padding:8px; margin-top:6px; border-radius:8px; border:1px solid #ccc; }
.child-avatar { width:50px; height:50px; border-radius:50%; object-fit:cover; margin-right:12px; vertical-align:middle; }
.child-header { display:flex; align-items:center; margin-bottom:8px; }
h2,h3,h4 { margin:6px 0; }
</style>
</head>
<body>
<header>
  <img src="logo.png.jpg" class="logo">
  <h1>–†–ê–ó–£–ú</h1>
  <p>–õ–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ‚Ä¢ –ü–µ—Ç–µ—Ä–≥–æ—Ñ</p>
  <p>üìû 8 913 450-30-29<br>üìç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 60–õ, 2 —ç—Ç–∞–∂</p>
</header>

<div id="roles">
  <button class="role-btn" style="background:#4a90e2" onclick="showParent()">–Ø —Ä–æ–¥–∏—Ç–µ–ª—å</button>
  <button class="role-btn" style="background:#22c55e" onclick="showSpeech()">–Ø –ª–æ–≥–æ–ø–µ–¥</button>
  <button class="role-btn" style="background:#f59e0b" onclick="showAdmin()">–Ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
</div>

<div id="parent" class="hidden"></div>
<div id="speech" class="hidden"></div>
<div id="admin" class="hidden"></div>

<script>
// ====== –î–ï–ú–û-–î–ê–ù–ù–´–ï ======
const colors = ["#FFF0F5","#E6FFFA","#FFF8E6","#E6F0FF","#FFF5E6","#E6FFE6","#FFF0E6","#F0E6FF","#E6F7FF"];
const data = JSON.parse(localStorage.getItem("razumData")) || {
  currentChildId: 1,
  children: [
    {id:1,name:"–§—ë–¥–æ—Ä",age:4,avatar:"https://i.pravatar.cc/50?img=1",tasks:[{id:1,text:"–ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ 10 —Å–ª–æ–≤ —Å–æ –∑–≤—É–∫–æ–º –†",done:false}],comment:"",paid:8,attended:0},
    {id:2,name:"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä",age:5,avatar:"https://i.pravatar.cc/50?img=2",tasks:[],comment:"",paid:12,attended:3},
    {id:3,name:"–ê—Ä—Ç—ë–º",age:4,avatar:"https://i.pravatar.cc/50?img=3",tasks:[],comment:"",paid:4,attended:1},
    {id:4,name:"–ú–∏—Ä–æ—Å–ª–∞–≤–∞",age:6,avatar:"https://i.pravatar.cc/50?img=4",tasks:[],comment:"",paid:8,attended:2},
    {id:5,name:"–Ø—Å—è",age:4,avatar:"https://i.pravatar.cc/50?img=5",tasks:[],comment:"",paid:12,attended:5},
    {id:6,name:"–í–ª–∞–¥–∏–º–∏—Ä",age:5,avatar:"https://i.pravatar.cc/50?img=6",tasks:[],comment:"",paid:8,attended:4},
    {id:7,name:"–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",age:6,avatar:"https://i.pravatar.cc/50?img=7",tasks:[],comment:"",paid:4,attended:2},
    {id:8,name:"–ê–ª–µ–∫—Å–µ–π",age:7,avatar:"https://i.pravatar.cc/50?img=8",tasks:[],comment:"",paid:8,attended:1},
    {id:9,name:"–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω",age:5,avatar:"https://i.pravatar.cc/50?img=9",tasks:[],comment:"",paid:12,attended:6},
    {id:10,name:"–ü—ë—Ç—Ä",age:6,avatar:"https://i.pravatar.cc/50?img=10",tasks:[],comment:"",paid:4,attended:1},
    {id:11,name:"–ï–ª–∏–∑–∞–≤–µ—Ç–∞",age:4,avatar:"https://i.pravatar.cc/50?img=11",tasks:[],comment:"",paid:8,attended:3},
    {id:12,name:"–ê–ª—ë–Ω–∞",age:5,avatar:"https://i.pravatar.cc/50?img=12",tasks:[],comment:"",paid:12,attended:5},
    {id:13,name:"–ú–∏—è",age:4,avatar:"https://i.pravatar.cc/50?img=13",tasks:[],comment:"",paid:4,attended:1},
    {id:14,name:"–¢–∞–∏—Ä",age:6,avatar:"https://i.pravatar.cc/50?img=14",tasks:[],comment:"",paid:8,attended:2},
    {id:15,name:"–°—Ç–µ—à–∞",age:5,avatar:"https://i.pravatar.cc/50?img=15",tasks:[],comment:"",paid:12,attended:6},
    {id:16,name:"–õ–µ–æ–Ω–∏–¥",age:4,avatar:"https://i.pravatar.cc/50?img=16",tasks:[],comment:"",paid:8,attended:3},
    {id:17,name:"–°–∞–≤–µ–ª–∏–π",age:5,avatar:"https://i.pravatar.cc/50?img=17",tasks:[],comment:"",paid:12,attended:5},
    {id:18,name:"–ê—Ä–∏–Ω–∞",age:6,avatar:"https://i.pravatar.cc/50?img=18",tasks:[],comment:"",paid:4,attended:1},
    {id:19,name:"–ï–≤–≥–µ–Ω–∏–π",age:7,avatar:"https://i.pravatar.cc/50?img=19",tasks:[],comment:"",paid:8,attended:2},
    {id:20,name:"–í–∞–¥–∏–º",age:5,avatar:"https://i.pravatar.cc/50?img=20",tasks:[],comment:"",paid:12,attended:5},
    {id:21,name:"–Æ–ª–∏—è",age:6,avatar:"https://i.pravatar.cc/50?img=21",tasks:[],comment:"",paid:8,attended:4},
    {id:22,name:"–ö–∏—Ä–∏–ª–ª",age:5,avatar:"https://i.pravatar.cc/50?img=22",tasks:[],comment:"",paid:12,attended:6},
    {id:23,name:"–ó–æ—è",age:4,avatar:"https://i.pravatar.cc/50?img=23",tasks:[],comment:"",paid:8,attended:3},
    {id:24,name:"–ú–∏—Ö–∞–∏–ª",age:6,avatar:"https://i.pravatar.cc/50?img=24",tasks:[],comment:"",paid:12,attended:5}
  ],
  teachers:[
    {name:"–í–∞—Å—é–∫–æ–≤–∞ –ê–Ω–∞—Å—Ç–∞—Å–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞", children:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]},
    {name:"–ü—Ä–æ–∫–æ–ø–µ–Ω–∫–æ –°–≤–µ—Ç–ª–∞–Ω–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞", children:[1,2,3,6,7,8]},
    {name:"–°–∞—Ñ—Ä–æ–Ω–æ–≤–∞ –ù–∞—Ç–∞–ª—å—è –ù–∏–∫–æ–ª–∞–µ–≤–Ω–∞", children:[13]}
  ],
  admin: {name:"–í–∞—Å—é–∫–æ–≤ –Æ—Ä–∏–π –°–µ—Ä–≥–µ–µ–≤–∏—á"}
};

function save(){localStorage.setItem("razumData",JSON.stringify(data));}
function currentChild(){return data.children.find(c=>c.id===data.currentChildId);}
function hideAll(){["roles","parent","speech","admin"].forEach(id=>document.getElementById(id).classList.add("hidden"));}
function back(){hideAll();document.getElementById("roles").classList.remove("hidden");}

// ====== –†–û–î–ò–¢–ï–õ–¨ ======
function showParent(){
  hideAll();
  const parentDiv=document.getElementById("parent");
  parentDiv.innerHTML="";
  data.children.forEach((c,index)=>{
    const card=document.createElement("div");
    card.className="card";
    card.style.background=colors[index%colors.length];

    const header=document.createElement("div");
    header.className="child-header";
    const avatar=document.createElement("img");
    avatar.src=c.avatar;
    avatar.className="child-avatar";
    const h2=document.createElement("h2");
    h2.innerText=`${c.name} (${c.age} –≥–æ–¥–∞)`;
    header.appendChild(avatar);
    header.appendChild(h2);
    card.appendChild(header);

    const comment=document.createElement("p");
    comment.innerHTML=`<b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ª–æ–≥–æ–ø–µ–¥–∞:</b><br>${c.comment || "‚Äî"}`;
    card.appendChild(comment);

    const prog=document.createElement("div");
    prog.className="progress";
    const progInner=document.createElement("div");
    progInner.style.width=c.tasks.length?`${c.tasks.filter(t=>t.done).length/c.tasks.length*100}%`:"0%";
    prog.appendChild(progInner);
    card.appendChild(prog);

    const taskTitle=document.createElement("h3");
    taskTitle.innerText="–ó–∞–¥–∞–Ω–∏—è";
    card.appendChild(taskTitle);

    c.tasks.forEach(t=>{
      const tDiv=document.createElement("div");
      tDiv.className="card";
      const label=document.createElement("label");
      const checkbox=document.createElement("input");
      checkbox.type="checkbox";
      checkbox.checked=t.done;
      checkbox.onchange=()=>{t.done=!t.done; save(); showParent();};
      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(" "+t.text));
      tDiv.appendChild(label);
      card.appendChild(tDiv);
    });

    const attendance=document.createElement("p");
    attendance.innerHTML=`<b>–û–ø–ª–∞—á–µ–Ω–æ –∑–∞–Ω—è—Ç–∏–π:</b> ${c.paid} ‚Ä¢ <b>–ü–æ—Å–µ—â–µ–Ω–æ:</b> ${c.attended} ‚Ä¢ <b>–û—Å—Ç–∞—Ç–æ–∫:</b> ${c.paid-c.attended}`;
    card.appendChild(attendance);

    parentDiv.appendChild(card);
  });
  const backBtn=document.createElement("button");
  backBtn.className="role-btn";
  backBtn.style.background="#4a90e2";
  backBtn.innerText="–ù–∞–∑–∞–¥";
  backBtn.onclick=back;
  parentDiv.appendChild(backBtn);
  parentDiv.classList.remove("hidden");
}

// ====== –õ–û–ì–û–ü–ï–î ======
function showSpeech(){
  hideAll();
  const speechDiv=document.getElementById("speech");
  speechDiv.innerHTML="";
  // –î–ª—è –¥–µ–º–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ—Ö –¥–µ—Ç–µ–π
  data.children.forEach((c,index)=>{
    const card=document.createElement("div");
    card.className="card";
    card.style.background=colors[index%colors.length];

    const header=document.createElement("div");
    header.className="child-header";
    const avatar=document.createElement("img");
    avatar.src=c.avatar; avatar.className="child-avatar";
    const h2=document.createElement("h2");
    h2.innerText=`${c.name} (${c.age} –≥–æ–¥–∞)`;
    header.appendChild(avatar); header.appendChild(h2);
    card.appendChild(header);

    const commentLabel=document.createElement("p");
    commentLabel.innerHTML="<b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</b>";
    card.appendChild(commentLabel);

    const textarea=document.createElement("textarea");
    textarea.value=c.comment;
    textarea.onchange=()=>{c.comment=textarea.value; save();};
    card.appendChild(textarea);

    const taskTitle=document.createElement("h4"); taskTitle.innerText="–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ"; card.appendChild(taskTitle);
    const taskInput=document.createElement("input"); taskInput.placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ"; card.appendChild(taskInput);
    const addBtn=document.createElement("button"); addBtn.className="role-btn"; addBtn.style.background="#22c55e"; addBtn.innerText="–î–æ–±–∞–≤–∏—Ç—å";
    addBtn.onclick=()=>{if(taskInput.value){c.tasks.push({id:Date.now(),text:taskInput.value,done:false}); save(); showSpeech();}};
    card.appendChild(addBtn);

    const attendBtn=document.createElement("button"); attendBtn.className="role-btn"; attendBtn.style.background="#22c55e"; attendBtn.innerText="–†–µ–±–µ–Ω–æ–∫ –ø—Ä–∏—à—ë–ª";
    attendBtn.onclick=()=>{if(c.attended<c.paid){c.attended++; save(); showSpeech();}};
    card.appendChild(attendBtn);

    const attendance=document.createElement("p");
    attendance.innerHTML=`–û–ø–ª–∞—á–µ–Ω–æ: ${c.paid} ‚Ä¢ –ü–æ—Å–µ—â–µ–Ω–æ: ${c.attended} ‚Ä¢ –û—Å—Ç–∞—Ç–æ–∫: ${c.paid-c.attended}`;
    card.appendChild(attendance);

    speechDiv.appendChild(card);
  });

  const backBtn=document.createElement("button"); backBtn.className="role-btn"; backBtn.style.background="#22c55e"; backBtn.innerText="–ù–∞–∑–∞–¥"; backBtn.onclick=back;
  speechDiv.appendChild(backBtn); speechDiv.classList.remove("hidden");
}

// ====== –ê–î–ú–ò–ù ======
function showAdmin(){
  hideAll();
  const adminDiv=document.getElementById("admin");
  adminDiv.innerHTML="";
  data.children.forEach((c,index)=>{
    const card=document.createElement("div"); card.className="card"; card.style.background=colors[index%colors.length];

    const header=document.createElement("div"); header.className="child-header";
    const avatar=document.createElement("img"); avatar.src=c.avatar; avatar.className="child-avatar";
    const h3=document.createElement("h3"); h3.innerText=`${c.name} (${c.age} –≥–æ–¥–∞)`;
    header.appendChild(avatar); header.appendChild(h3); card.appendChild(header);

    const comment=document.createElement("p"); comment.innerHTML=`<b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</b> ${c.comment || "‚Äî"}`; card.appendChild(comment);

    const taskTitle=document.createElement("h4"); taskTitle.innerText="–ó–∞–¥–∞–Ω–∏—è"; card.appendChild(taskTitle);
    c.tasks.forEach(t=>{const tDiv=document.createElement("div"); tDiv.innerText=`${t.text} ${t.done?"‚úÖ":"‚ùå"}`; card.appendChild(tDiv);});

    const attendance=document.createElement("p"); attendance.innerHTML=`–û–ø–ª–∞—á–µ–Ω–æ: ${c.paid} ‚Ä¢ –ü–æ—Å–µ—â–µ–Ω–æ: ${c.attended} ‚Ä¢ –û—Å—Ç–∞—Ç–æ–∫: ${c.paid-c.attended}`;
    card.appendChild(attendance);

    adminDiv.appendChild(card);
  });

  const infoCard=document.createElement("div"); infoCard.className="card"; infoCard.innerHTML=`üë©‚Äç‚öïÔ∏è –õ–æ–≥–æ–ø–µ–¥–æ–≤: ${data.teachers.length}<br>–¶–µ–Ω—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ ‚úÖ`;
  adminDiv.appendChild(infoCard);

  const backBtn=document.createElement("button"); backBtn.className="role-btn"; backBtn.style.background="#f59e0b"; backBtn.innerText="–ù–∞–∑–∞–¥"; backBtn.onclick=back;
  adminDiv.appendChild(backBtn); adminDiv.classList.remove("hidden");
}

save();
</script>
</body>
</html>
