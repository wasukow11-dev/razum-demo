<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–†–ê–ó–£–ú ‚Äî –¥–µ–º–æ</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#eef2ff,#ffffff);
  margin: 0;
  padding: 16px;
}

.header { text-align: center; margin-bottom: 16px; }
.logo { max-width: 130px; margin: 0 auto 6px; display: block; }
.contacts { font-size: 14px; color: #374151; }

.role-btn {
  padding: 12px;
  margin: 6px 0;
  width: 100%;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  background: #6366f1;
  color: #fff;
}

.card {
  background: #fff;
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.progress {
  background: #e5e7eb;
  border-radius: 10px;
  overflow: hidden;
  margin-top: 6px;
}
.progress div {
  background: #22c55e;
  height: 10px;
}

.hidden { display:none; }
input, select {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1px solid #d1d5db;
}
</style>
</head>

<body>

<div class="header">
  <img src="logo.png" class="logo">
  <h1>–†–ê–ó–£–ú</h1>
  <div class="contacts">
    üìû <a href="tel:+78913450309">8 913 450-30-09</a><br>
    üìç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 60–õ, 2 —ç—Ç–∞–∂
  </div>
  <button class="role-btn" onclick="call()">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
  <button class="role-btn" onclick="route()">–ú–∞—Ä—à—Ä—É—Ç</button>
</div>

<div id="onboarding" class="hidden">
  <div class="card">
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å üëã</h2>
    <p>–ó–¥–µ—Å—å –≤—ã –≤–∏–¥–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è –ª–æ–≥–æ–ø–µ–¥–∞, –æ—Ç–º–µ—á–∞–µ—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º —Ä–µ–±—ë–Ω–∫–∞.</p>
    <button class="role-btn" onclick="finishOnboarding()">–ù–∞—á–∞—Ç—å</button>
  </div>
</div>

<div id="roles">
  <button class="role-btn" onclick="showParent()">–Ø —Ä–æ–¥–∏—Ç–µ–ª—å</button>
  <button class="role-btn" onclick="showSpeech()">–Ø –ª–æ–≥–æ–ø–µ–¥</button>
  <button class="role-btn" onclick="showAdmin()">–Ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
</div>

<div id="parent" class="hidden"></div>
<div id="speech" class="hidden"></div>
<div id="admin" class="hidden"></div>

<script>
// ===== –£–¢–ò–õ–ò–¢–´ =====
function hideAll() {
  ["roles","parent","speech","admin","onboarding"].forEach(id =>
    document.getElementById(id).classList.add("hidden")
  );
}
function back() {
  hideAll();
  document.getElementById("roles").classList.remove("hidden");
}
function call() {
  location.href = "tel:+78913450309";
}
function route() {
  window.open("https://yandex.ru/maps/?text=–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π%20–ø—Ä–æ—Å–ø–µ–∫—Ç%2060–õ");
}

// ===== –î–ê–ù–ù–´–ï =====
const data = {
  children: {
    "–§—ë–¥–æ—Ä": []
  }
};

const childName = "–§—ë–¥–æ—Ä";

// ===== ONBOARDING =====
if (!localStorage.getItem("onboarded")) {
  hideAll();
  document.getElementById("onboarding").classList.remove("hidden");
}
function finishOnboarding() {
  localStorage.setItem("onboarded","yes");
  back();
}

// ===== –†–û–î–ò–¢–ï–õ–¨ =====
function showParent() {
  hideAll();
  const el = document.getElementById("parent");
  el.innerHTML = `<h2>${childName} (4 –≥–æ–¥–∞)</h2>`;

  const tasks = data.children[childName];
  let done = tasks.filter(t=>t.done).length;
  let progress = tasks.length ? Math.round(done/tasks.length*100) : 0;

  el.innerHTML += `
    <div class="card">
      –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress}%
      <div class="progress"><div style="width:${progress}%"></div></div>
    </div>
  `;

  tasks.forEach((t,i)=>{
    el.innerHTML += `
      <div class="card">
        <label>
          <input type="checkbox" ${t.done?"checked":""}
            onchange="toggleTask(${i})">
          ${t.text}
        </label>
      </div>
    `;
  });

  el.innerHTML += `<button class="role-btn" onclick="back()">–ù–∞–∑–∞–¥</button>`;
  el.classList.remove("hidden");
}

function toggleTask(i) {
  data.children[childName][i].done = !data.children[childName][i].done;
  save();
  showParent();
}

// ===== –õ–û–ì–û–ü–ï–î =====
function showSpeech() {
  hideAll();
  const el = document.getElementById("speech");
  el.innerHTML = `
    <h2>–õ–æ–≥–æ–ø–µ–¥</h2>
    <div class="card">
      <select id="kid">
        <option>–§—ë–¥–æ—Ä</option>
      </select>
      <input id="taskText" placeholder="–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ">
      <button class="role-btn" onclick="addTask()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
    </div>
    <button class="role-btn" onclick="back()">–ù–∞–∑–∞–¥</button>
  `;
  el.classList.remove("hidden");
}

function addTask() {
  const kid = document.getElementById("kid").value;
  const text = document.getElementById("taskText").value;
  if (!text) return;
  data.children[kid].push({ text, done:false });
  save();
  alert("–ó–∞–¥–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ");
  document.getElementById("taskText").value="";
}

// ===== –ê–î–ú–ò–ù =====
function showAdmin() {
  hideAll();
  document.getElementById("admin").innerHTML = `
    <h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h2>
    <div class="card">–î–µ—Ç–∏: 1</div>
    <div class="card">–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ ‚úÖ</div>
    <button class="role-btn" onclick="back()">–ù–∞–∑–∞–¥</button>
  `;
  document.getElementById("admin").classList.remove("hidden");
}

// ===== –•–†–ê–ù–ï–ù–ò–ï =====
const saved = localStorage.getItem("razumData");
if (saved) Object.assign(data, JSON.parse(saved));
function save() {
  localStorage.setItem("razumData", JSON.stringify(data));
}
</script>

</body>
</html>
