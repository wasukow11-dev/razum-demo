<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–†–ê–ó–£–ú ‚Äî –¥–µ–º–æ</title>

<style>
:root{
  --bg:#020617;
  --card:#020617ee;
  --primary:#6366f1;
  --accent:#22c55e;
  --gold:#facc15;
  --text:#f8fafc;
  --muted:#94a3b8;
  --back:#334155;
}

body{
  margin:0;
  padding:16px;
  font-family:-apple-system,BlinkMacSystemFont,Arial;
  background:var(--bg);
  color:var(--text);
}

button{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:18px;
  background:linear-gradient(135deg,var(--primary),#818cf8);
  color:#fff;
  font-size:16px;
}

.back{
  background:linear-gradient(135deg,var(--back),#475569)
}

.card{
  background:var(--card);
  border-radius:20px;
  padding:16px;
  margin-bottom:14px;
}

.task{
  display:flex;
  gap:8px;
  align-items:center;
  margin:6px 0;
}

.task.done{
  opacity:.5;
  text-decoration:line-through
}

.reward{
  background:linear-gradient(135deg,#16a34a,#22c55e);
  padding:12px;
  border-radius:16px;
  margin-top:12px;
  text-align:center;
  font-weight:bold;
}

.hidden{display:none}

select{
  width:100%;
  padding:8px;
  border-radius:12px;
  background:#020617;
  color:#fff;
  border:1px solid rgba(255,255,255,.15);
}
</style>
</head>

<body>

<h1>–†–ê–ó–£–ú</h1>

<!-- üîí –ü–û–õ–ù–´–ô –ë–õ–û–ö –û –¶–ï–ù–¢–†–ï (–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù) -->
<div class="card">
  <b style="font-size:18px">–õ–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´–†–∞–∑—É–º¬ª</b><br><br>

  –ú—ã ‚Äî –ª–æ–≥–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –≤ –ü–µ—Ç–µ—Ä–≥–æ—Ñ–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º
  –æ—Ç 3 –¥–æ 7 –ª–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ä–µ—á—å, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏.<br><br>

  –í —Ä–∞–±–æ—Ç–µ –º—ã –æ–ø–∏—Ä–∞–µ–º—Å—è –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ä–µ–≥—É–ª—è—Ä–Ω—É—é
  –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –∏ –ø–æ–Ω—è—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–æ–¥–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç
  –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.<br><br>

  –≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —á–∞—Å—Ç—å –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã:
  –¥–µ—Ç–∏ –≤–æ–≤–ª–µ–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–∏—è –∏ –Ω–∞–≥—Ä–∞–¥—ã,
  —Ä–æ–¥–∏—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç, –∑–∞ —á—Ç–æ –ø–ª–∞—Ç—è—Ç,
  –ª–æ–≥–æ–ø–µ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —É–¥–æ–±–Ω–æ–º —Ü–∏—Ñ—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ,
  –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É —Ü–µ–Ω—Ç—Ä–∞.<br><br>

  üìû <b>8 913 450-30-29</b><br>
  üìç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç 60–õ, 2 —ç—Ç–∞–∂
</div>

<div id="home">
  <button onclick="showParent()">–ö–ª–∏–µ–Ω—Ç</button>
  <button onclick="showSpeech()">–õ–æ–≥–æ–ø–µ–¥</button>
  <button onclick="showAdmin()">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
</div>

<div id="screen" class="hidden"></div>

<script>
const PRICE=16000;

const data={
  "–í–∞—Å—é–∫–æ–≤–∞ –ê–Ω–∞—Å—Ç–∞—Å–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞":["–§—ë–¥–æ—Ä","–ê—Ä—Ç—ë–º","–ú–∏—Ä–æ—Å–ª–∞–≤–∞","–ê–ª–µ–∫—Å–∞–Ω–¥—Ä","–Ø—Å—è"],
  "–ü—Ä–æ–∫–æ–ø–µ–Ω–∫–æ –°–≤–µ—Ç–ª–∞–Ω–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞.":["–î–∞–≤–∏–¥","–ú–∞–∫—Å–∏–º","–ò–ª—å—è"],
  "–°–∞—Ñ—Ä–æ–Ω–æ–≤–∞ –ù–∞—Ç–∞–ª—å—è –ù–∏–∫–æ–ª–∞–µ–≤–Ω–∞":["–ú–∞–π—è"]
};

const store=JSON.parse(localStorage.getItem("razum"))||{};

function save(){localStorage.setItem("razum",JSON.stringify(store))}
function screen(){home.classList.add("hidden");screenEl.classList.remove("hidden");return screenEl}
function back(){screenEl.classList.add("hidden");home.classList.remove("hidden")}

const home=document.getElementById("home");
const screenEl=document.getElementById("screen");

function initChild(name,log){
 if(store[name])return;
 store[name]={
   name,log,reward:false,
   tasks:[
     {text:"–ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ —Å–ª–æ–≤–∞ —Å–æ –∑–≤—É–∫–æ–º –†",status:"active",checked:false},
     {text:"–ê—Ä—Ç–∏–∫—É–ª—è—Ü–∏–æ–Ω–Ω–∞—è –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞",status:"active",checked:false}
   ]
 };
 save();
}

/* === –†–û–î–ò–¢–ï–õ–¨ === */
function showParent(){
 const s=screen();
 s.innerHTML="<h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</h2>";
 Object.keys(data).forEach(l=>{
   s.innerHTML+=`<button onclick="parentKids('${l}')">${l}</button>`;
 });
 s.innerHTML+=`<button class="back" onclick="back()">–ù–∞–∑–∞–¥</button>`;
}

function parentKids(log){
 const s=screen();
 s.innerHTML=`<h2>${log}</h2>`;
 data[log].forEach(k=>{
   s.innerHTML+=`<button onclick="parentChild('${k}','${log}')">${k}</button>`;
 });
 s.innerHTML+=`<button class="back" onclick="showParent()">–ù–∞–∑–∞–¥</button>`;
}

function parentChild(name,log){
 initChild(name,log);
 const c=store[name];
 const s=screen();

 s.innerHTML=`
 <h2>${name}</h2>
 <div class="card">
 ${c.tasks.map((t,i)=>`
  <div class="task ${t.status==='done'?'done':''}">
   ${t.status==='active'?`
     <input type="checkbox" ${t.checked?'checked':''}
     onchange="toggle('${name}',${i})">
   `:""}
   ${t.text} (${t.status})
  </div>`).join("")}

 ${c.reward?`<div class="reward">üèÜ –ú–æ–ª–æ–¥–µ—Ü! –ó–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!</div>`:""}

 <button onclick="send('${name}')">–Ø –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞–Ω–∏—è</button>
 </div>
 <button class="back" onclick="parentKids('${log}')">–ù–∞–∑–∞–¥</button>`;
}

function toggle(name,i){
 store[name].tasks[i].checked=!store[name].tasks[i].checked;
 save();
}

function send(name){
 const c=store[name];
 if(!c.tasks.every(t=>t.checked)){
   alert("–û—Ç–º–µ—Ç—å—Ç–µ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è");
   return;
 }
 c.tasks.forEach(t=>t.status="review");
 c.reward=true;
 save();
 parentChild(name,c.log);
}

/* === –õ–û–ì–û–ü–ï–î === */
function showSpeech(){
 const s=screen();
 s.innerHTML="<h2>–õ–æ–≥–æ–ø–µ–¥—ã</h2>";
 Object.keys(data).forEach(l=>{
   s.innerHTML+=`<button onclick="speechKids('${l}')">${l}</button>`;
 });
 s.innerHTML+=`<button class="back" onclick="back()">–ù–∞–∑–∞–¥</button>`;
}

function speechKids(log){
 const s=screen();
 s.innerHTML=`<h2>${log}</h2>`;
 data[log].forEach(k=>{
   s.innerHTML+=`<button onclick="speechChild('${k}','${log}')">${k}</button>`;
 });
 s.innerHTML+=`<button class="back" onclick="showSpeech()">–ù–∞–∑–∞–¥</button>`;
}

function speechChild(name,log){
 initChild(name,log);
 const c=store[name];
 const canApprove=c.tasks.every(t=>t.status==="review");
 const s=screen();

 s.innerHTML=`
 <h2>${name}</h2>
 <div class="card">
 ${c.tasks.map(t=>`<div class="task">${t.text} (${t.status})</div>`).join("")}

 ${canApprove?`
 <label>
   <input type="checkbox" id="ok">
   –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π
 </label>

 <div id="new" class="hidden">
   <select id="newTasks" multiple>
     <option>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–≤—É–∫–∞</option>
     <option>–°–ª–æ–≥–æ–≤—ã–µ —Ü–µ–ø–æ—á–∫–∏</option>
     <option>–ò–≥—Ä–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</option>
   </select>
   <button onclick="assign('${name}')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–±—ë–Ω–∫—É</button>
 </div>
 `:""}
 </div>
 <button class="back" onclick="speechKids('${log}')">–ù–∞–∑–∞–¥</button>`;

 const chk=document.getElementById("ok");
 if(chk){
   chk.onchange=()=>document.getElementById("new").classList.toggle("hidden");
 }
}

function assign(name){
 const sel=[...document.getElementById("newTasks").selectedOptions].map(o=>o.value);
 if(!sel.length){
   alert("–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è");
   return;
 }
 store[name].tasks=sel.map(t=>({text:t,status:"active",checked:false}));
 store[name].reward=false;
 save();
 speechChild(name,store[name].log);
}

/* === –ê–î–ú–ò–ù === */
function showAdmin(){
 const kids=Object.values(data).flat().length;
 const s=screen();
 s.innerHTML=`
 <h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h2>
 <div class="card">
 üë∂ –î–µ—Ç–µ–π: ${kids}<br>
 üí∞ –î–æ—Ö–æ–¥: ${(kids*PRICE).toLocaleString()} ‚ÇΩ
 </div>
 <button class="back" onclick="back()">–ù–∞–∑–∞–¥</button>`;
}
</script>
</body>
</html>
